/* 🐈 First Pawt */
/* Source: Firefox Chrome-like */
/* (https://github.com/OfficialFreak/firefox_chromelike) */

.notificationbox-stack.global-notificationbox {
  background: #3b394d;
}

/* bookmarks bar padding */
#PlacesToolbarItems {
  padding-bottom: 2px;
}

/* rounded urlbar */
.urlbar-input-container, #urlbar-background {
  border-radius: 999vw !important;
}

#urlbar-background {
	transition: all 0.1s linear !important;
  outline-color: rgba(91, 206, 250, 0.8) !important;
}

div[breakout-extend=true] #urlbar-background {
  border-radius: 5px !important;
  margin-inline-end: 8px;
}

/* rounded urlbar buttons */
#identity-box {
  border-radius: 999vw 0 0 999vw;
  overflow: hidden;
}

#identity-box[pageproxystate="valid"]:is(.notSecureText, .chromeUI, .extensionPage) > .identity-box-button, #urlbar-label-box {
  background: #3B394D !important;
}

#identity-box[pageproxystate="valid"]:is(.notSecureText, .chromeUI, .extensionPage) > .identity-box-button:hover, #urlbar-label-box:hover {
  background: #4F4D5F !important;
}

#urlbar:not([breakout-extend=true]) div[pageproxystate=invalid] #identity-box {
  margin-inline-end: 10px !important;
}

[breakout-extend=true] #identity-box {
  border-radius: 5px !important;
}

#urlbar:not([breakout-extend=true]) #page-action-buttons {
  border-radius: 0 999vw 999vw 0;
  overflow: hidden;
}

[breakout-extend=true] #page-action-buttons {
  margin-right: 8px;
}

/* hide extension button from urlbar */
#identity-box.extensionPage #identity-icon-box {
  display: none;
}

/* hide tracking protection button from urlbar */
#tracking-protection-icon-container {
  display: none;
}

.tab-background {
  border-radius: 7px !important;
}

.tab-background:is([selected], [multiselected]) {
  background: #3b394d !important;
  box-shadow: 0px #3b394d !important;
  border-radius: 10px !important;
}

.tab-background:is([selected], [multiselected])::before, .tab-background:is([selected], [multiselected])::after {
  content: "";
  position: absolute;
  width: 10px;
  height: 10px;
  bottom: 0;
  box-shadow: 0 0 0 10px #3b394d;
  background: #1e1e30;
  overflow: clip;
  clip-path: border-box;
}

.tab-background:is([selected], [multiselected])::before {
  left: -10px;
  border-radius: 0px 0px 10px 0px;
}

.tab-background:is([selected], [multiselected])::after {
  right: -10px;
  border-radius: 0px 0px 0px 10px;
}

/* tab buttons color */
toolbar #tabs-newtab-button:hover > :is(.toolbarbutton-icon, .toolbarbutton-text, .toolbarbutton-badge-stack) {
  background: rgb(242, 170, 185) !important;
}

.tabbrowser-tab:hover > .tab-stack > .tab-background:not([selected], [multiselected]) {
  background: rgb(242, 170, 185) !important;
}

/* stylish findbar animation✨ */
findbar[hidden=true] {
  transform: translateY(-200%) !important;
}

findbar {
  position: absolute;
  contain: unset !important;
  top: 10px;
  right: 10px;
  background: #1C1B21 !important;
  box-shadow: 3px 3px 24px #0b0b0b;
  border: none !important;
  border-radius: 10px;
  transition: transform .1s ease-out !important;
}

findbar [anonid=find-case-sensitive], findbar [anonid=find-match-diacritics], findbar [anonid=find-entire-word] {
  display: none;
}

findbar .findbar-textbox {
  background: none !important;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

findbar .checkbox-label {
  display: none;
}

findbar .checkbox-check {
  accent-color: rgb(91, 206, 250) !important;
}

findbar description {
  display: none !important;
}

/* 🐈 Second Pawt */
/* Source: GWfox */
/* (https://github.com/akkva/gwfox) */

/* rounded tabbox & toolbox */
:root:not([inDOMFullscreen]) {
  #tabbrowser-tabbox browser:not(.devtools-toolbox-bottom-iframe, .devtools-toolbox-side-iframe) {
    border-radius: 6px;
    clip-path: inset(0 round 8px);
    background-color: light-dark(#fff, #202020) !important;
    -moz-window-dragging: no-drag;
  }
  
  .browserStack {
    border-radius: 8px;
    margin: 0 8px 8px 0px;
    box-shadow: 0 1.5px 9px light-dark(#00000026, #00000040);
  }
  
  #tabbrowser-tabpanels {
    margin-top: 0;
    transition: .25s !important;
    background-color: transparent !important;
  }
  
  .devtools-toolbox-side-iframe {
    border-radius: 8px;
    margin-bottom: 8px !important;
    box-shadow: 0 1.5px 9px light-dark(#00000026, #00000040);
    -moz-window-dragging: no-drag;
    &:first-child { margin-left: 8px !important; }
    &:last-child { margin-right: 8px !important; }
  }
  
  .devtools-toolbox-bottom-iframe {
    border-radius: 8px;
    margin: 0 8px 8px 8px !important;
    box-shadow: 0 1.5px 9px light-dark(#00000026, #00000040);
  }
}

/* remove tab borders & shadows */
#tabbrowser-tabbox {
  box-shadow: none !important;
  outline: none !important;
  overflow: unset !important;
}

/* browser window dragging */
#sidebar-main {
  -moz-window-dragging: drag;
}

#sidebar-box, .tools-and-extensions {
  -moz-window-dragging: no-drag;
}

/* cool bookmarks-adding animation */
#star-button[starred], #translations-button-circle-arrows,
#reader-mode-button[readeractive] > .urlbar-icon,
#translations-button[translationsactive] > #translations-button-icon,
#shopping-sidebar-button[shoppingsidebaropen] > .urlbar-icon {
  fill: #f5a9b8 !important;
}

:has(#star-button-box[open]) {
  #star-button[starred] {
    animation-name: urlbar-zoom-reset-pulse;
    animation-duration: 250ms;
  }
}

/* 🐈 Third Pawt */
/* Source: shimmer */
/* (https://github.com/nuclearcodecat/shimmer) */

/* slim scrollbars everywhear!!!! */
* {
	scrollbar-width: thin !important;
}

/* blurred urlbar */
:root[chromehidden*="menubar toolbar directories extrachrome"] #urlbar-background { 
	background: rgba(0, 0, 0, 0) !important;
	border: 0 !important;
}

:root:not([chromehidden*="menubar toolbar directories extrachrome"]) #urlbar-background { 
	background: var(--toolbar-field-background-color) !important;
	border: 1px solid var(--toolbar-field-border-color) !important;
}

/* make the background of extended urlbar move down */
#urlbar[breakout-extend] {
  position: fixed !important;
  margin-top: 12vh !important;
  background: rgba(0, 0, 0, 0) !important;
}  

/* do some other shit with urlbar */
#urlbar[breakout-extend] {
  transition: margin-top 0.45s cubic-bezier(0.075, 0.82, 0.165, 1) !important;
}

#urlbar {
  transition: margin-top 0.45s cubic-bezier(0.075, 0.82, 0.165, 1) !important;
}

#urlbar[breakout-extend] {
	z-index: 9999 !important;
	left: 10% !important;
	width: calc(100vw - 20%) !important;
}

#urlbar[breakout-extend] #urlbar-background {
  transition: all 0.1s linear !important;
}

#urlbar[breakout-extend] #urlbar-background {
  transition: none !important;
}

#urlbar[breakout-extend] #urlbar-background {
	background: var(--toolbar-field-focus-background-color) !important;
}

/* needed for popup transition to work */
#urlbar {
	margin-top: 0 !important;
}

/* urlbox backdrop */
#urlbar[breakout-extend]::before{
	content: '' !important;
	width: 200vw !important;
	height: 200vh !important;
	position: fixed !important;
	pointer-events: none !important;
	overflow: hidden !important;
	top: -30vh !important;
	left: -30vw !important;
	background: color-mix(in srgb, var(--toolbar-field-focus-background-color) 35%, rgba(0, 0, 0, 0.2)) !important;
}

/* centered text when urlbar not in use */
#urlbar:not(:is([breakout-extend])) #urlbar-input {
	text-align: center !important;
}

/* bigger rounding for navbar buttons */
#nav-bar {
	toolbarbutton {
		& > stack, & > image {
			border-radius: 10px !important;
		}
	}
}

/* 🐈 Third Pawt */
/* Source: u/fainas1337 on Reddit */
/* (https://www.reddit.com/r/FirefoxCSS/comments/1giwq9k/sharing_my_simple_tabs_volume_button_changes_with/) */

/* add blur for tab speaker icon */
@media (prefers-color-scheme: dark) {
  :root {
    --firefoxcss-tab-speaker-icon-color: hsl(0, 0%, 100%);
    --firefoxcss-tab-speaker-hover-bg-color: hsla(0, 0%, 80%);
    --firefoxcss-tab-speaker-icon-hover-color: hsl(0, 0%, 10%);
  }
}

@media (prefers-color-scheme: light) {
  :root {
    --firefoxcss-tab-speaker-icon-color: hsl(0, 0%, 10%);
    --firefoxcss-tab-speaker-hover-bg-color: hsla(0, 0%, 20%);
    --firefoxcss-tab-speaker-icon-hover-color: hsl(0, 0%, 100%);
  }
}

/* awesome animation for speaker icon❤️‍🔥 */
#tabbrowser-tabs[orient="vertical"] .tabbrowser-tab .tab-icon-overlay:not([crashed]) {
  &:is([soundplaying], [muted], [activemedia-blocked]) {
    background-color: #0000002e !important;
    backdrop-filter: blur(6px);
    fill: var(--firefoxcss-tab-speaker-icon-color) !important;
    border: 1px solid #ffffff29 !important;
    transition: transform 100ms ease-in-out, fill 100ms ease-in-out,
      background-color 100ms ease-in-out;

    &:hover {
      fill: var(--firefoxcss-tab-speaker-icon-color) !important;
      background-color: transparent !important;
      border: 1px solid #ffffff29 !important;
      transition: transform 100ms ease-in-out, fill 100ms ease-in-out,
        background-color 100ms ease-in-out !important;
      transform: scale(1.3) translate(-8%, 14%);
      transform-origin: center !important;
    }
  }
}

/* 🐈 Fourth Pawt */
/* My own ruleees! >:3 */

/* remove spacers */
.titlebar-spacer {
  display: none;
}

/* do some fancy shit */
#browser {
  clip-path: circle(100%);
  background-color: transparent !important;
}

/* transparent pop up menu */
.toolbar-menupopup {
  appearance: auto !important;
  --panel-background: transparent !important;
  --panel-shadow-margin: 0 !important;
}

/* hide extension icon from the address bar */
#identity-box.extensionPage #identity-icon-label {
	display: none !important;
}

/* make downloads icon prettier (UwU) */
#downloads-button[progress] {
  --downloads-progress-border-color: rgb(242, 170, 185) !important;
  --downloads-progress-fill: rgb(242, 170, 185) !important;
}
#downloads-button[attention="success"] {
  --downloads-progress-border-color: rgb(185, 242, 170) !important;
  --downloads-progress-fill: rgb(185, 242, 170) !important;
}
#downloads-button[attention="warning"] {
  --downloads-progress-border-color: rgb(242, 228, 171) !important;
  --downloads-progress-fill: rgb(242, 228, 171) !important;
}
#downloads-button[attention="severe"] {
  --downloads-progress-border-color: red !important;
  --downloads-progress-fill: red !important;
}
#downloads-button {
  --toolbarbutton-icon-fill-attention: var(--downloads-progress-fill) !important;
}
#downloads-button > .toolbarbutton-badge-stack > #downloads-indicator-progress-outer {
  border-color: var(--downloads-progress-border-color) !important;
}

/* 🐈‍⬛ Bonus Pawt */
/* ~Tabliss~ */

/* a hacky solution to replace the tabliss favicon */
tab[label="New Tab"] .tab-icon-stack img {
  content: url('https://miamoremustachio.github.io/logo/favicon.png');
}
